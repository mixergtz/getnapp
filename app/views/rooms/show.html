<div class="room-main-img">
  <header class="intro-header" style="background-image: url('<%= @room_availability.room.image.url %>')">
      <div class="container">
          <div class="row">
              <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                  <div class="site-heading">

                  </div>
              </div>
          </div>
      </div>
  </header>
</div>
<div class="container container-full">
  <div class="row room-summary">
    <div class="container">

      <div class="col-md-2 col-md-offset-1 text-center">
        <br>
        <%= image_tag @room_availability.hotel.image.url, { class: "img-rounded", width: "100%" } %>
        <p class="text-muted"><%= @room_availability.hotel.name %></p>
      </div>

      <div class="col-md-5">
        <h3><%= @room_availability.room.name %>
          <span class="stars">
            <% @room_availability.room.rating.times do %>
              <i class="fa fa-star"></i>
            <% end %>
          </span>
        </h3>
        <p class="text-muted"><%= @room_availability.hotel.address %> </p>
        <div class="row">
          <div class="col-md-4 text-center">
            <i class="icon-clock"></i>
            <p class="text-muted">3-6-12 hours</p>
          </div>
          <div class="col-md-4 text-center">
            <i class="icon-lodging"></i>
            <p class="text-muted">Bed</p>
          </div>
          <div class="col-md-4 text-center">
            <i class="icon-user-add"></i>
            <p class="text-muted">+1 guests</p>
          </div>
        </div>
      </div>
      <div class="col-md-3 book-form text-center">
          <div class="price">
            <h4><%= number_to_currency(@room_availability.price, precision: 0) %></h4>
          </div>
          <h5 class="text-center">Available on:</h5>
          <h4><%= @room_availability.start.strftime("%F") %></h4>
          <h5 class="text-center">at:</h5>
          <h4><%= @room_availability.start.strftime("%I:%M %p") %> - <%= @room_availability.start.advance(hours: @room_availability.hours).strftime('%I:%M %p') %></h4>
          <!-- <form action="">
            <div class="form-group">
              <label for="arrival_date">Date</label>
              <input type="date" class="form-control" id="arrival_date">
            </div>
            <div class="form-group">
              <label for="arrival_time">Time</label>
              <input type="time" class="form-control" id="arrival_time">
            </div>
          </form> -->
          <!-- <button type="button" class="btn btn-info btn-lg">Book it</button> -->
          <% if @room_availability.available? %>
            <%= link_to "Book it", book_room_path(@room_availability), class: "btn btn-info btn-lg", method: :post %>
          <% else %>
            <%= link_to "Not available", "#", class: "btn btn-danger btn-lg disabled" %>
          <% end %>
      </div>
    </div>
  </div>

  <div class="row room-details">
    <div class="container">
      <div class="row">
        <div class="col-md-7 col-md-offset-1">
          <h3>About the room</h3>
          <p> <%= @room_availability.room.description %> </p>
        </div>
      </div>

      <div class="row room-img-1">
        <div class="col-md-7 col-md-offset-1">
          <!-- <img src="https://a2.muscache.com/ic/pictures/27390468/79829cf0_original.jpg?interpolation=lanczos-none&size=x_large&output-format=progressive-jpeg&output-quality=70" width="100%" alt=""> -->
          <%= image_tag @room_availability.room.try(:img_extra1).try(:url), { width: "100%" } %>
        </div>
        <hr>
      </div>


      <div class="row whats-included">
        <div class="col-md-7 col-md-offset-1">
          <h3>What's included?</h3>
          <p>This room has the following elements:</p>

          <% @room_availability.room.extra_info.try(:each) do |k,v| %>
              <% if v == "1" %>
                <div class="row">
                  <div class="col-md-4 col-md-offset-4"><h5><%= k.capitalize %></h5></div>
                  <div class="col-md-4 room-icons">
                    <i class="icon-<%= k %>"></i>
                  </div>
                </div>
              <% end %>
          <% end %>

          <hr>
        </div>
      </div>

      <div class="row room-img-1">
        <div class="col-md-7 col-md-offset-1">
          <%= image_tag @room_availability.room.try(:img_extra2).try(:url), { width: "100%" } %>
        </div>
        <hr>
      </div>

      <br>

      <div class="row">
        <div class="col-md-7 col-md-offset-1">
          <h3>About the hotel</h3>
          <p> <%= @room_availability.hotel.description %> </p>
        </div>
      </div>

      <div class="row">
        <div class="col-md-7 col-md-offset-1">
          <%= image_tag @room_availability.hotel.image.url, { class: "img-rounded", width: "100%" } %>
        </div>
      </div>
      <br>

    </div>
  </div>
  <div class="row hotel-location">
    <div id="map-canvas"></div>
  </div>
  <div class="row">
    <%= render "shared/footer" %>
  </div>
</div>

<script>
  $(document).ready(function(){
  var myLatlng = new google.maps.LatLng(6.2067854,-75.5703812);
  var mapOptions = {
    zoom: 15,
    scrollwheel: false,
    center: myLatlng
  }
  var map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);
  var points = [<%= raw @room_availability.hotel.to_json.html_safe %>];
  setPoints(map, points);
});
</script>


